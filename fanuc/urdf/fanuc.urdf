<?xml version="1.0" ?>
<robot name="fanuc" xmlns:xacro="http://ros.org/wiki/xacro">


<!-- ~~~~~~~~~~~~~~ COLORS ~~~~~~~~~~~~~~ -->

  <!-- Upper links and bases -->
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material> 

  <!-- Lower link color -->
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material> 


<!-- ~~~~~~~~~~~~ FIXED BASE ~~~~~~~~~~~~ -->

  <!-- World -->
  <link name="base_link"/>

  <!-- Joint between world and fixed base -->
  <joint name="base" type="fixed">
    <parent link="base_link"/>
    <child link="Fixed_Base"/>
    <axis xyz="0 0 0"/>
    <origin rpy="0 0 0" xyz="0 0 1.452"/>
  </joint>

  <!-- Fixed triangular base -->
  <link name="Fixed_Base">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 0.0"/>
      <mass value="0.48"/>
      <inertia ixx="0.003604" ixy="0.0" ixz="0.0" iyy="0.003604" iyz="0.0" izz="0.0072"/>
    </inertial>
    <visual>
      <material name="white"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/fixed_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/fixed_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>


  <!-- ~~~~~~~~~~~~~ JOINT 1 ~~~~~~~~~~~~~~ -->


  <!-- Motor on fixed base -->
  <joint name="J1_Motor" type="revolute">
    <origin rpy="0 0 0" xyz="-0.18 0.015 -0.085"/>
    <parent link="Fixed_Base"/>
    <child link="J1_Upper"/>
    <limit effort="20" lower="-1.1" upper="0.8" velocity="1.57"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Joint between fixed base and upper link -->
  <joint name="J1_Fixed" type="continuous">
    <origin rpy="0 -0.637 0" xyz="-0.565 -0.01 -0.02"/>
    <parent link="J1_Upper"/>
    <child link="J1_Elbow"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Upper link -->
  <link name="J1_Upper">
    <inertial>
      <origin rpy="0 0 0" xyz="0 -0.071 0"/>
      <mass value="0.0466"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="1.94166666667e-05"/>
    </inertial>
    <visual>
      <material name="white"/>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between upper and lower links -->
  <link name="J1_Elbow">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and left lower link -->
  <joint name="J1_ElbowL" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="J1_Elbow"/>
    <child link="J1_LowerL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Left lower link -->
  <link name="J1_LowerL">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/>  
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and right lower link -->
  <joint name="J1_ElbowR" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>x
    <parent link="J1_Elbow"/>
    <child link="J1_LowerR"/>
    <mimic joint="J1_ElbowL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Right lower link -->
  <link name="J1_LowerR">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 -0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between lower link and end effector -->
  <link name="J1_EE">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
     <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

    <!-- Joint between pin and lower left link -->
  <joint name="J1_BaseL" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 -1.175"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <parent link="J1_LowerL"/>
    <child link="J1_EE"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Use sdf tag to close the loops -->
  <gazebo>

    <!-- Joint between pin and lower right link -->
    <joint name="J1_BaseR" type="revolute">
      <origin rpy="0 0 0" xyz="0 0 -1.175"/>
      <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
      <parent link="J1_LowerR"/>
      <child link="J1_EE"/>
      <axis xyz="1 0 0"/>
    </joint>

  </gazebo>

  <!-- Joint between pin and end effector -->
  <joint name="J1_Base" type="revolute">
    <origin rpy="0 0.637 0" xyz="0.05275 0 0"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <parent link="J1_EE"/>
    <child link="EE_Base"/>
    <axis xyz="1 0 0"/>
  </joint>


  <!-- ~~~~~~~~~~~~~ JOINT 2 ~~~~~~~~~~~~~~ -->


  <!-- Motor on fixed base-->
  <joint name="J2_Motor" type="revolute">
    <origin rpy="0 0 2.094" xyz="0.07725 -0.1525 -0.085"/>
    <parent link="Fixed_Base"/>
    <child link="J2_Upper"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <axis xyz="0 1 0"/>
  </joint>

    <!-- Joint between fixed base and upper link -->
  <joint name="J2_Fixed" type="continuous">
    <origin rpy="0 -0.637 0" xyz="-0.565 -0.01 -0.02"/>
    <parent link="J2_Upper"/>
    <child link="J2_Elbow"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Upper link -->
  <link name="J2_Upper">
    <inertial>
      <origin rpy="0 0 0" xyz="0 -0.071 0"/>
      <mass value="0.0466"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="1.94166666667e-05"/>
    </inertial>
    <visual>
      <material name="white"/>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between upper and lower links -->
  <link name="J2_Elbow">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and left lower link -->
  <joint name="J2_ElbowL" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="J2_Elbow"/>
    <child link="J2_LowerL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Left lower link -->
  <link name="J2_LowerL">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/>  
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and right lower link -->
  <joint name="J2_ElbowR" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>x
    <parent link="J2_Elbow"/>
    <child link="J2_LowerR"/>
    <mimic joint="J2_ElbowL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Right lower link -->
  <link name="J2_LowerR">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 -0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between lower link and end effector -->
  <link name="J2_EE">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
     <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and lower left link -->
  <joint name="J2_BaseL" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 -1.175"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <parent link="J2_LowerL"/>
    <child link="J2_EE"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Use sdf tag to close the loop -->
  <gazebo>

    <!-- Joint between pin and lower right link -->
    <joint name="J2_BaseR" type="revolute">
      <origin rpy="0 0 0" xyz="0 0 -1.175"/>
      <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
      <parent link="J2_LowerR"/>
      <child link="J2_EE"/>
      <axis xyz="1 0 0"/>
    </joint>

    <!-- Joint between pin and end effector -->
    <joint name="J2_Base" type="revolute">
      <origin rpy="0 0.637 0" xyz="0.05275 0 0"/>
      <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
      <parent link="EE_Base"/>
      <child link="J2_EE"/>
      <axis xyz="1 0 0"/>
    </joint>

  </gazebo>


  <!-- ~~~~~~~~~~~~~ JOINT 3 ~~~~~~~~~~~~~~ -->


  <!-- Motor on fixed base-->
  <joint name="J3_Motor" type="revolute">
    <origin rpy="0 0 -2.094" xyz="0.0925 0.154 -0.085"/>
    <parent link="Fixed_Base"/>
    <child link="J3_Upper"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <axis xyz="0 1 0"/>
  </joint>

    <!-- Joint between fixed base and upper link -->
  <joint name="J3_Fixed" type="continuous">
    <origin rpy="0 -0.637 0" xyz="-0.565 -0.01 -0.02"/>
    <parent link="J3_Upper"/>
    <child link="J3_Elbow"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Upper link -->
  <link name="J3_Upper">
    <inertial>
      <origin rpy="0 0 0" xyz="0 -0.071 0"/>
      <mass value="0.0466"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="1.94166666667e-05"/>
    </inertial>
    <visual>
      <material name="white"/>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/upper_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between upper and lower links -->
  <link name="J3_Elbow">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and left lower link -->
  <joint name="J3_ElbowL" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="J3_Elbow"/>
    <child link="J3_LowerL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Left lower link -->
  <link name="J3_LowerL">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/>  
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and right lower link -->
  <joint name="J3_ElbowR" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 0"/>x
    <parent link="J3_Elbow"/>
    <child link="J3_LowerR"/>
    <mimic joint="J3_ElbowL"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- Right lower link -->
  <link name="J3_LowerR">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <mass value="0.04"/>
      <inertia ixx="0.000867013333333" ixy="0.0" ixz="0.0" iyy="0.000867013333333" iyz="0.0" izz="2.66666666667e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 -0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.02 -0.585"/> 
      <geometry>
        <cylinder length="1.175" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Pin between lower link and end effector -->
  <link name="J3_EE">
    <inertial>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <mass value="0.0173"/>
      <inertia ixx="3.60993333333e-06" ixy="0.0" ixz="0.0" iyy="3.60993333333e-06" iyz="0.0" izz="1.15333333333e-08"/>
    </inertial>
    <visual>
      <material name="black"/>
      <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </visual>
    <collision>
     <origin rpy="0 1.57 1.57" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.005"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint between pin and lower left link -->
  <joint name="J3_BaseL" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 -1.175"/>
    <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
    <parent link="J3_LowerL"/>
    <child link="J3_EE"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- Use sdf tag to close the loop -->
  <gazebo>

    <!-- Joint between pin and lower right link -->
    <joint name="J3_BaseR" type="revolute">
      <origin rpy="0 0 0" xyz="0 0 -1.175"/>
      <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
      <parent link="J3_LowerR"/>
      <child link="J3_EE"/>
      <axis xyz="1 0 0"/>
    </joint>

    <!-- Joint between pin and end effector -->
    <joint name="J3_Base" type="revolute">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <limit effort="20" lower="-1.1" upper="1.1" velocity="1.57"/>
      <parent link="EE_Base"/>
      <child link="J3_EE"/>
      <axis xyz="1 0 0"/>
    </joint>

  </gazebo>


  <!-- ~~~~~~~~~~~ END EFFECTOR ~~~~~~~~~~~ -->


  <!-- End effector base-->
  <link name="EE_Base">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.014"/> 
      <inertia ixx="4.5e-06" ixy="0.0" ixz="0.0" iyy="4.5e-06" iyz="0.0" izz="4.5e-06"/>
    </inertial>
    <visual>
      <material name="white"/>
      <origin rpy="0 0 -1.04" xyz="0 0 -0.104"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/end_effector.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 -1.04" xyz="0 0 -0.104"/>
      <geometry>
        <mesh filename="file://$(find fanuc)/urdf/mesh/end_effector.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  

  <!-- ~~~~~~~~~~ TRANSMISSION ~~~~~~~~~~~~ -->


  <!-- Joint 1 -->
  <transmission name="J1_Trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="J1_Motor">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="J1_Actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <!-- Joint 2 -->
  <transmission name="J2_Trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="J2_Motor">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="J2_Actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <!-- Joint 3 -->
  <transmission name="J3_Trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="J3_Motor">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="J3_Actuator">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

</robot>